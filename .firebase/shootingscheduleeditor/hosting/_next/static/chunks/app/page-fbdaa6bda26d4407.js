(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{477:()=>{},750:(e,t,n)=>{Promise.resolve().then(n.bind(n,5394))},5394:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ed});var r=n(5155),a=n(2115),s=n(1380),i=n(4616),l=n(4020),o=n(6287),d=n(4357),c=n(3837),x=n(2525),u=n(1066),g=n(9869),m=n(9074),h=n(4186),p=n(9803),f=n(5968),v=n(2109),y=n.n(v);let b=()=>"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),j="hYp3r-S3cUr3-K3y-f0r-M3ntalBr3akd0wn-!@#$",N=e=>{try{let t=JSON.stringify(e,null,2),n=y().AES.encrypt(t,j).toString(),r=new Blob([n],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(r),s="".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_").concat(new Date().toISOString().split("T")[0],".mbd"),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download",s),i.click(),i.remove(),URL.revokeObjectURL(a)}catch(e){console.error("Export failed:",e),alert("Sorry, the project could not be exported.")}},w=e=>new Promise((t,n)=>{let r=new FileReader;r.onload=e=>{try{var r;let n=null===(r=e.target)||void 0===r?void 0:r.result,a=y().AES.decrypt(n,j).toString(y().enc.Utf8);if(!a)throw Error("Invalid file or wrong key.");let s=JSON.parse(a);s.id=b(),s.updatedAt=new Date().toISOString(),t(s)}catch(e){console.error("Import failed:",e),n(Error("Import failed. The file may be corrupt or not a valid project file."))}},r.onerror=()=>n(Error("Error reading file.")),r.readAsText(e)});var S=n(9099);function k(){return(0,r.jsx)("footer",{className:"border-t border-slate-200 bg-white z-10",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"flex flex-col h-2 sm:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"text-center sm:text-left",children:[(0,r.jsx)("p",{className:"text-sm text-slate-600 font-medium",children:"MentalBreakdown"}),(0,r.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["\xa9",new Date().getFullYear()," | V.2.0.0.1 (Beta) Created by Tawich P."]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-5",children:(0,r.jsx)("a",{href:"https://github.com/Homesick-prod/breakdown",target:"_blank",rel:"noopener noreferrer",className:"relative z-10 text-slate-400 hover:text-slate-600 transition-colors",title:"GitHub",children:(0,r.jsx)(S.A,{className:"w-5 h-5"})})})]})})})}function C(e){let{onCreateProject:t}=e;return(0,r.jsxs)("div",{className:"text-center py-24",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-6",children:(0,r.jsx)(s.A,{className:"w-10 h-10 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No projects yet"}),(0,r.jsx)("p",{className:"text-gray-500 mb-8 max-w-sm mx-auto",children:"Create your first project to manage your shooting schedules and shot lists."}),(0,r.jsxs)("button",{onClick:t,className:"inline-flex items-center gap-2 px-6 py-3 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,r.jsx)(i.A,{className:"w-5 h-5"}),"Create Your First Project"]})]})}function A(e){let{project:t,onEdit:n,onDuplicate:s,onExport:i,onDelete:u}=e,[g,m]=(0,a.useState)(!1),h=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.jsxs)("div",{ref:h,className:"relative",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),m(!g)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(l.A,{className:"w-4 h-4 text-gray-500"})}),g&&(0,r.jsxs)("div",{className:"absolute right-0 top-10 w-48 bg-white rounded-lg shadow-lg border border-gray-100 py-1 z-10",children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),n(),m(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"})," Edit Details"]}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),s(),m(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"w-4 h-4"})," Duplicate"]}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),i(),m(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"w-4 h-4"})," Export"]}),(0,r.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),u(),m(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"w-4 h-4"})," Delete"]})]})]})}function T(e){let{onSelectProject:t,onCreateProject:n}=e,[s,l]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)(""),[v,y]=(0,a.useState)(""),j=(0,a.useRef)(null),[S,T]=(0,a.useState)(null),[D,P]=(0,a.useState)(""),[L,E]=(0,a.useState)(""),[I,F]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("shootingScheduleProjects")||"[]");e.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),l(e)},[]);let z=e=>{T(e),P(e.name),E(e.description||"")},M=()=>T(null),O=e=>{if(!window.confirm("Are you sure you want to delete this project? This action cannot be undone."))return;let t=s.filter(t=>t.id!==e);l(t),localStorage.setItem("shootingScheduleProjects",JSON.stringify(t))},R=e=>{let t=[{...e,id:b(),name:"".concat(e.name," (Copy)"),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},...s];t.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),l(t),localStorage.setItem("shootingScheduleProjects",JSON.stringify(t))},U=e=>N(e),W=async e=>{let t=e.target.files[0];if(t){try{let e=await w(t),n=[...s,e];n.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),l(n),localStorage.setItem("shootingScheduleProjects",JSON.stringify(n)),alert("Project imported successfully!")}catch(e){alert(e.message)}e.target&&(e.target.value=null)}};return(0,r.jsxs)("div",{className:" min-h-screen bg-gradient-to-br from-slate-50 via-slate-100 to-slate-50 relative overflow-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-[0.01]",style:{"--s":"100px",background:"radial-gradient(100% 50% at 100% 0, #0000, #0004 5%, #797979FF 6% 14%, #ffffff 16% 24%, #797979FF 26% 34%, #ffffff 36% 44%, #797979FF 46% 54%, #ffffff 56% 64%, #797979FF 66% 74%, #ffffff 76% 84%, #797979FF 86% 94%, #0004 95%, #0000), radial-gradient(100% 50% at 0 50%, #0000, #0004 5%, #797979FF 6% 14%, #ffffff 16% 24%, #797979FF 26% 34%, #ffffff 36% 44%, #797979FF 46% 54%, #ffffff 56% 64%, #797979FF 66% 74%, #ffffff 76% 84%, #797979FF 86% 94%, #0004 95%, #0000), radial-gradient(100% 50% at 100% 100%, #0000, #0004 5%, #797979FF 6% 14%, #ffffff 16% 24%, #797979FF 26% 34%, #ffffff 36% 44%, #797979FF 46% 54%, #ffffff 56% 64%, #797979FF 66% 74%, #ffffff 76% 84%, #797979FF 86% 94%, #0004 95%, #0000)",backgroundSize:"var(--s) calc(2 * var(--s))"}}),(0,r.jsxs)("main",{className:"flex-grow z-2",children:[(0,r.jsx)("nav",{className:"w-screen bg-white shadow-sm border-b border-gray-100 fixed",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(u.A,{className:"w-8 h-8 text-indigo-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"MentalBreakdown"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Film Production Suite"})]})]}),(0,r.jsxs)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,r.jsx)(g.A,{className:"w-4 h-4"})," Import Project"]}),(0,r.jsx)("input",{ref:j,type:"file",accept:".mbd,.json",onChange:W,className:"hidden"})]})})}),(0,r.jsxs)("div",{className:"pt-24 z-12 max-w-7xl mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Your Projects"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your shooting schedules and production timelines"})]}),0===s.length?(0,r.jsx)(C,{onCreateProject:()=>d(!0)}):(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,r.jsx)("button",{onClick:()=>d(!0),className:"h-64 rounded-xl border-2 border-dashed border-gray-300 hover:border-indigo-400 hover:bg-gray-50 transition-all duration-200 group",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 group-hover:bg-indigo-100 flex items-center justify-center mb-3 transition-colors",children:(0,r.jsx)(i.A,{className:"w-6 h-6 text-gray-400 group-hover:text-indigo-600 transition-colors"})}),(0,r.jsx)("span",{className:"text-gray-600 font-medium group-hover:text-indigo-600 transition-colors",children:"Create New Project"})]})}),s.map(e=>(0,r.jsxs)("div",{onClick:()=>F(e),className:"h-64 bg-white rounded-xl shadow-sm border border-gray-100 hover:shadow-md hover:border-gray-200 transition-all duration-200 cursor-pointer group overflow-hidden flex flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:e.name}),(0,r.jsx)(A,{project:e,onEdit:()=>z(e),onDuplicate:()=>R(e),onExport:()=>U(e),onDelete:()=>O(e.id)})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4",children:e.description||"No description"})]}),(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.A,{className:"w-3 h-3"})," ",new Date(e.updatedAt).toLocaleDateString()]}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[(0,r.jsx)(h.A,{className:"w-3 h-3"})," ",new Date(e.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})})]},e.id))]})]})]}),(0,r.jsx)(k,{}),I&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/15 backdrop-blur-sm transition-opacity",onClick:()=>F(null)}),(0,r.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Open Project"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:['Choose which editor you want to use for "',I.name,'".']}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>{t(I,"schedule"),F(null)},className:"flex flex-col items-center justify-center p-6 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-300 rounded-lg transition-all",children:[(0,r.jsx)(p.A,{className:"w-10 h-10 text-gray-500 mb-3"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Shooting Schedule"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Plan your shooting days"})]}),(0,r.jsxs)("button",{onClick:()=>{t(I,"shotlist"),F(null)},className:"flex flex-col items-center justify-center p-6 bg-gray-50 hover:bg-indigo-50 border border-gray-200 hover:border-indigo-300 rounded-lg transition-all",children:[(0,r.jsx)(f.A,{className:"w-10 h-10 text-gray-500 mb-3"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-gray-800",children:"Shot List"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Organize all your shots"})]})]})]})]})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/15 backdrop-blur-sm transition-opacity",onClick:()=>d(!1)}),(0,r.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Create New Project"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Project Name"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>x(e.target.value),placeholder:"Enter project name",className:"w-full px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",autoFocus:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-800 mb-2",children:"Description (Optional)"}),(0,r.jsx)("textarea",{value:v,onChange:e=>y(e.target.value),placeholder:"Brief description of your project",rows:3,className:"w-full px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none transition-all"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(!c.trim())return;let e={id:b(),name:c,description:v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),data:{scheduleData:null,shotListData:null}},t=[e,...s];t.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),l(t),localStorage.setItem("shootingScheduleProjects",JSON.stringify(t)),x(""),y(""),d(!1),F(e)},disabled:!c.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Create Project"})]})]})]})}),S&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4",children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/15 backdrop-blur-sm transition-opacity",onClick:M}),(0,r.jsxs)("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-6 animate-in fade-in zoom-in duration-200",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Edit Project"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Name"}),(0,r.jsx)("input",{type:"text",value:D,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",autoFocus:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),(0,r.jsx)("textarea",{value:L,onChange:e=>E(e.target.value),rows:3,className:"w-full px-4 py-2 border text-gray-700 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none transition-all"})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,r.jsx)("button",{onClick:M,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(!S||!D.trim())return;let e=s.map(e=>e.id===S.id?{...e,name:D,description:L,updatedAt:new Date().toISOString()}:e);e.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()),l(e),localStorage.setItem("shootingScheduleProjects",JSON.stringify(e)),M()},disabled:!D.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Save Changes"})]})]})]})})]})}var D=n(5143),P=n(8021),L=n(8266),E=n(1154),I=n(5193),F=n(5196),z=n(4229),M=n(2783),O=n(4416),R=n(7213),U=n(7550),W=n(1788),_=n(381),H=n(6474),B=n(4516),J=n(5163),G=n(1034),V=n(6386),Y=n(4992),K=n(7130),Z=n(7312),X=n(3509),q=n(7580),Q=n(7712);let $=(e,t)=>{if(!e||null===t||t<0||isNaN(t))return"";try{let[n,r]=e.split(":").map(Number);if(isNaN(n)||isNaN(r))return"";let a=new Date;a.setHours(n,r,0,0);let s=new Date(a.getTime()+6e4*t),i=s.getHours().toString().padStart(2,"0"),l=s.getMinutes().toString().padStart(2,"0");return"".concat(i,":").concat(l)}catch(e){return""}},ee=(e,t)=>{if(!e||!t)return 0;try{let[n,r]=e.split(":").map(Number),[a,s]=t.split(":").map(Number);if(isNaN(n)||isNaN(r)||isNaN(a)||isNaN(s))return 0;let i=new Date;i.setHours(n,r,0,0);let l=new Date;l.setHours(a,s,0,0),l<i&&l.setDate(l.getDate()+1);let o=l.getTime()-i.getTime(),d=Math.round(o/6e4);return d>=0?d:0}catch(e){return 0}},et=(e,t,n,r)=>{let a=window.open("","_blank");if(!a){alert("Please allow pop-ups to export to PDF.");return}let s="\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>Breakdown Q".concat(e.shootingDay||"1"," - ").concat(e.projectTitle,'</title>\n            <meta charset="UTF-8">\n            <style>\n                @import url(\'https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap\');\n\n                @page {\n                    size: A4 landscape;\n                    margin: 8mm;\n                }\n\n                * {\n                    margin: 0;\n                    padding: 0;\n                    box-sizing: border-box;\n                }\n\n                body {\n                    font-family: \'Sarabun\', Arial, sans-serif;\n                    font-size: 9pt;\n                    line-height: 1.2;\n                    color: #000;\n                    background: white;\n                }\n\n                .header {\n                    width: 100%;\n                    margin-bottom: 10px;\n                }\n\n                .top-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: flex-start;\n                    background: #f0f0f0;\n                    padding: 8px 12px;\n                    border: 1px solid #000;\n                }\n\n                .left-info {\n                    flex: 1;\n                }\n\n                .center-title {\n                    flex: 2;\n                    text-align: center;\n                    padding: 0 20px;\n                }\n\n                .right-info {\n                    flex: 1;\n                    text-align: right;\n                }\n\n                .project-title {\n                    font-size: 24pt;\n                    font-weight: 700;\n                    color: #000;\n                    margin: 5px 0;\n                }\n\n                .breakdown-title {\n                    font-size: 10pt;\n                    color: #333;\n                    margin-top: 5px;\n                }\n\n                .page-info {\n                    font-size: 10pt;\n                    font-weight: 600;\n                    margin-bottom: 5px;\n                }\n\n                .sub-info {\n                    font-size: 8pt;\n                    color: #333;\n                    line-height: 1.4;\n                }\n\n                .info-grid {\n                    display: grid;\n                    grid-template-columns: 1fr 2fr 1fr;\n                    gap: 10px;\n                    margin-bottom: 8px;\n                }\n\n                .info-box {\n                    background: #f8f8f8;\n                    border: 1px solid #ccc;\n                    padding: 6px 10px;\n                    font-size: 8pt;\n                }\n\n                .info-box-title {\n                    font-weight: 600;\n                    color: #333;\n                    margin-bottom: 4px;\n                    text-transform: uppercase;\n                    font-size: 8pt;\n                }\n\n                .info-item {\n                    margin: 2px 0;\n                    display: flex;\n                    justify-content: space-between;\n                }\n\n                .info-label {\n                    font-weight: 500;\n                    color: #555;\n                }\n\n                .info-value {\n                    font-weight: 400;\n                    color: #000;\n                }\n\n                .schedule-table {\n                    width: 100%;\n                    border-collapse: collapse;\n                    font-size: 8pt;\n                    margin-bottom: 10px;\n                    table-layout: fixed;\n                }\n\n                .schedule-table th {\n                    background: #4a4a4a;\n                    color: white;\n                    padding: 6px 4px;\n                    text-align: center;\n                    font-weight: 600;\n                    font-size: 7pt;\n                    border: 1px solid #333;\n                    text-transform: uppercase;\n                }\n\n                .schedule-table td {\n                    padding: 4px;\n                    border: 1px solid #ccc;\n                    vertical-align: middle;\n                    text-align: center;\n                }\n\n                .schedule-table tr:nth-child(even) {\n                    background-color: #f9f9f9;\n                }\n\n                .section-header {\n                    background-color: #e0e0e0 !important;\n                    font-weight: 600;\n                    text-align: center;\n                }\n\n                .lunch-row {\n                    background-color: #cc9999 !important;\n                    color: white;\n                    font-weight: 600;\n                }\n\n                .dinner-row {\n                    background-color: #cc9999 !important;\n                    color: white;\n                    font-weight: 600;\n                }\n\n                .wrap-row {\n                    background-color: #666666 !important;\n                    color: white;\n                    font-weight: 600;\n                }\n\n                .break-row {\n                    background-color: #ffcc99 !important;\n                    font-weight: 600;\n                }\n\n                .setup-row {\n                    background-color: #cccccc !important;\n                }\n\n                .travel-row {\n                    background-color: #dddddd !important;\n                }\n\n                .time-cell {\n                    font-weight: 600;\n                    white-space: nowrap;\n                    font-size: 8pt;\n                }\n\n                .scene-cell {\n                    font-weight: 600;\n                    color: #000;\n                }\n\n                .shot-cell {\n                    font-weight: 600;\n                    color: #000;\n                }\n\n                .description-cell {\n                    text-align: left;\n                    padding-left: 6px;\n                    font-size: 8pt;\n                }\n\n                .ref-image {\n                    max-width: 60px;\n                    max-height: 45px;\n                    object-fit: cover;\n                    display: block;\n                    margin: 0 auto;\n                    border: 1px solid #ddd;\n                }\n\n                .handheld {\n                    background-color: #66cccc !important;\n                    color: white;\n                }\n\n                .footer {\n                    margin-top: 15px;\n                    display: flex;\n                    justify-content: space-between;\n                    font-size: 8pt;\n                    color: #666;\n                }\n\n                @media print {\n                    body {\n                        print-color-adjust: exact;\n                        -webkit-print-color-adjust: exact;\n                    }\n\n                    .header,\n                    .info-grid {\n                        page-break-after: avoid !important;\n                        break-after: avoid;\n                    }\n\n                    .schedule-table {\n                        page-break-inside: auto;\n                        break-inside: auto;\n                    }\n\n                    .schedule-table thead {\n                        display: table-header-group;\n                        page-break-inside: avoid;\n                        break-inside: avoid;\n                    }\n\n                    .schedule-table tr {\n                        page-break-inside: avoid;\n                        break-inside: avoid;\n                    }\n                }\n            </style>\n        </head>\n        <body>\n            <div class="header">\n                <div class="top-header">\n                    <div class="left-info">\n                        <div class="info-label">Director : ').concat(e.director||"-",'</div>\n                        <div class="info-label">Producer : ').concat(e.producer||"-",'</div>\n                        <div class="info-label">Production Designer : ').concat(e.pd||"-",'</div>\n                        <div class="info-label">Director of Photography : ').concat(e.dop||"-",'</div>\n                        <div class="info-label">1st AD : ').concat(e.firstAD||"-",'</div>\n                        <div class="info-label">2nd AD : ').concat(e.secondAD||"-",'</div>\n                    </div>\n\n                    <div class="center-title">\n                        <div class="breakdown-title">Breakdown Q').concat(e.shootingDay||"1"," of ").concat(e.totalDays||1,'</div>\n                        <div class="project-title">').concat(e.projectTitle||"-",'</div>\n                        <div class="sub-info">Shooting date : ').concat((e=>{let t=new Date(e);return"".concat(t.getDate()," ").concat(["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"][t.getMonth()]," ").concat(t.getFullYear()+543)})(e.date),'</div>\n                    </div>\n\n                    <div class="right-info">\n                        <div class="page-info">Q').concat(e.shootingDay||"1",'</div>\n                        <div class="sub-info">Rise ').concat(e.sunrise||"--:--"," | Set ").concat(e.sunset||"--:--",'</div>\n                        <div class="sub-info">').concat(e.weather||"Considerable cloudiness",'</div>\n                        <div class="sub-info">Probability of Precipitation ').concat(e.precipProb||"--%",'</div>\n                        <div class="sub-info">').concat(e.temp||"--\xb0"," | Real Feel ").concat(e.realFeel||"--\xb0",'</div>\n                    </div>\n                </div>\n            </div>\n\n            <div class="info-grid">\n                <div class="info-box">\n                    <div class="info-box-title">Call/Wrap up Times</div>\n                    <div class="info-item">\n                        <span class="info-label">Crew call :</span>\n                        <span class="info-value">').concat(e.callTime||"",'</span>\n                    </div>\n                    <div class="info-item">\n                        <span class="info-label">Wrap up :</span>\n                        <span class="info-value">').concat(e.wrapTime||"",'</span>\n                    </div>\n                </div>\n\n                <div class="info-box" style="text-align: center;">\n                    <div class="info-box-title">Location</div>\n                    <div style="margin: 5px 0;">\n                        <div><strong>Location 1</strong></div>\n                        <div>').concat(e.location1||e.location||"-","</div>\n                    </div>\n                    ").concat(e.location2?'\n                        <div style="margin: 5px 0;">\n                            <div><strong>Location 2</strong></div>\n                            <div>'.concat(e.location2,"</div>\n                        </div>\n                    "):"",'\n                </div>\n\n                <div class="info-box">\n                    <div class="info-box-title">Meal Times</div>\n                    <div class="info-item">\n                        <span class="info-label">First Meal :</span>\n                        <span class="info-value">').concat(e.firstmealTime||"-",'</span>\n                    </div>\n                    <div class="info-item">\n                        <span class="info-label">Second Meal :</span>\n                        <span class="info-value">').concat(e.secondmealTime||"-",'</span>\n                    </div>\n                </div>\n            </div>\n\n            <table class="schedule-table">\n                <thead>\n                    <tr>\n                        <th colspan="2" style="width: 120px;">Time</th> <th rowspan="2" style="width: 40px;">dur.</th>\n                        <th rowspan="2" style="width: 60px;">INT/EXT<br/>(Location)</th>\n                        <th rowspan="2" style="width: 50px;">Period</th>\n                        <th rowspan="2" style="width: 50px;">Scene</th>\n                        <th rowspan="2" style="width: 40px;">Shot</th>\n                        <th rowspan="2" style="width: 80px;">Shot Type<br/>/ Size</th>\n                        <th rowspan="2" style="width: 80px;">Angle</th>\n                        <th rowspan="2" style="width: 70px;">Movement</th>\n                        <th rowspan="2" style="width: 50px;">Lens</th>\n                        <th rowspan="2" style="width: 180px;">Description</th>\n                        <th rowspan="2" style="width: 60px;">Cast</th>\n                        <th rowspan="2" style="width: 80px;">Blockshot</th>\n                        <th rowspan="2" style="width: 80px;">Main Props</th>\n                        <th rowspan="2" style="width: 70px;">Costume</th>\n                        <th rowspan="2" style="width: 100px;">Remark</th>\n                    </tr>\n                    <tr>\n                        <th style="width: 60px;">Start</th> <th style="width: 60px;">End</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    ').concat(t.map((e,t)=>{let n="",a="";if("break"===e.type)n=e.description.toLowerCase().includes("lunch")?"lunch-row":e.description.toLowerCase().includes("dinner")?"dinner-row":e.description.toLowerCase().includes("wrap")?"wrap-row":e.description.toLowerCase().includes("set up")||e.description.toLowerCase().includes("setup")?"setup-row":e.description.toLowerCase().includes("เดินทาง")||e.description.toLowerCase().includes("travel")?"travel-row":"break-row",a='\n                                <td class="time-cell">'.concat(e.start||"00:00",'</td>\n                                <td class="time-cell">').concat(e.end||"00:00","</td>\n                                <td>").concat(e.duration,'\'</td>\n                                <td colspan="14" class="description-cell" style="text-align: center; font-weight: 600;">').concat(e.description,"</td>\n                            ");else{let t=r[e.id]?'<img src="'.concat(r[e.id],'" class="ref-image" alt="Ref">'):"";e.movement&&e.movement.toLowerCase().includes("hand")&&(n="handheld"),a='\n                                <td class="time-cell">'.concat(e.start||"00:00",'</td>\n                                <td class="time-cell">').concat(e.end||"00:00","</td>\n                                <td>").concat(e.duration,"'</td>\n                                <td>").concat(e.intExt||"",'<br/><span style="font-size: 7pt;">(').concat(e.location||"",")</span></td>\n                                <td>").concat(e.dayNight||"",'</td>\n                                <td class="scene-cell">').concat(e.sceneNumber||"",'</td>\n                                <td class="shot-cell">').concat(e.shotNumber||"","</td>\n                                <td>").concat(e.shotSize||"","</td>\n                                <td>").concat(e.angle||"","</td>\n                                <td>").concat(e.movement||"","</td>\n                                <td>").concat(e.lens||"",'mm</td>\n                                <td class="description-cell">').concat(e.description||"",'</td>\n                                <td style="font-size: 8pt;">').concat(e.cast||"","</td>\n                                <td>").concat(t,'</td>\n                                <td style="font-size: 8pt;">').concat(e.props||"",'</td>\n                                <td style="font-size: 8pt;">').concat(e.costume||"",'</td>\n                                <td style="font-size: 8pt;">').concat(e.notes||"","</td>\n                            ")}return'<tr class="'.concat(n,'">').concat(a,"</tr>")}).join(""),'\n                </tbody>\n            </table>\n\n            <div class="footer">\n                <div style="font-size: 6pt;">Generated on ').concat(new Date().toLocaleString("th-TH"),'</div>\n                <div style="font-size: 6pt;">MentalBreakdown | Beta V.2.0.0.1 Created by Tawich P.</div>\n            </div>\n        </body>\n        </html>\n    ');a.document.write(s),a.document.close(),a.onload=function(){a.print()}};function en(e){let{status:t}=e,{icon:n,text:a,className:s}=(()=>{switch(t){case"saving":return{icon:(0,r.jsx)(E.A,{className:"w-4 h-4 animate-spin"}),text:"Saving...",className:"text-gray-600"};case"dirty":return{icon:(0,r.jsx)(I.A,{className:"w-4 h-4"}),text:"Unsaved changes",className:"text-amber-600"};case"saved":return{icon:(0,r.jsx)(F.A,{className:"w-4 h-4"}),text:"Saved",className:"text-green-600"};default:return{icon:(0,r.jsx)(z.A,{className:"w-4 h-4"}),text:"All changes saved",className:"text-gray-500"}}})();return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium ".concat(s," transition-all duration-300"),children:[n,(0,r.jsx)("span",{className:"hidden sm:inline",children:a})]})}function er(e){let{id:t,item:n,index:a,imagePreviews:s,handleItemChange:i,handleImageUpload:l,handlePasteImage:o,removeTimelineItem:d,handleRemoveImage:c}=e,{attributes:u,listeners:g,setNodeRef:m,transform:h,transition:p}=(0,P.gl)({id:t}),f={transform:L.Ks.Transform.toString(h),transition:p},v="break"===n.type,y=0===a;return(0,r.jsxs)("tr",{ref:m,style:f,className:"group ".concat(a%2==0?"bg-white":"bg-gray-50/50"," ").concat(v?"bg-amber-50":""),children:[(0,r.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-center",children:(0,r.jsx)("button",{...u,...g,className:"cursor-grab p-1 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"time",value:n.start,onChange:e=>i(n.id,"start",e.target.value),disabled:!y,className:"text-gray-600 px-3 py-1.5 text-sm border rounded-lg font-medium transition-all ".concat(y?"border-gray-300 hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20":"border-gray-200 bg-gray-100 text-gray-500 cursor-not-allowed")}),(0,r.jsx)("span",{className:"text-gray-400",children:"→"}),(0,r.jsx)("input",{type:"time",value:n.end,onChange:e=>i(n.id,"end",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all"})]})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("input",{type:"number",min:"0",value:n.duration,onChange:e=>i(n.id,"duration",e.target.value),className:"text-gray-600 w-16 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"min"})]})}),v?(0,r.jsx)("td",{colSpan:"15",className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.description,onChange:e=>i(n.id,"description",e.target.value),className:"text-amber-700 w-full px-4 py-2 bg-amber-100 border border-amber-200 rounded-lg hover:border-amber-300 focus:border-amber-400 focus:ring-2 focus:ring-amber-400/20 font-medium transition-all",placeholder:"Break description"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.sceneNumber,onChange:e=>i(n.id,"sceneNumber",e.target.value),className:"text-gray-600 w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all",placeholder:"1A"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.shotNumber,onChange:e=>i(n.id,"shotNumber",e.target.value),className:"text-gray-600 w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all",placeholder:"001"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.intExt,onChange:e=>i(n.id,"intExt",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"INT",children:"INT"}),(0,r.jsx)("option",{value:"EXT",children:"EXT"}),(0,r.jsx)("option",{value:"INT/EXT",children:"INT/EXT"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.dayNight,onChange:e=>i(n.id,"dayNight",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"DAY",children:"DAY"}),(0,r.jsx)("option",{value:"NIGHT",children:"NIGHT"}),(0,r.jsx)("option",{value:"DAWN",children:"DAWN"}),(0,r.jsx)("option",{value:"DUSK",children:"DUSK"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.location,onChange:e=>i(n.id,"location",e.target.value),className:"text-gray-600 w-36 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"Location"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.shotSize,onChange:e=>i(n.id,"shotSize",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"ECU",children:"ECU - Extreme Close Up"}),(0,r.jsx)("option",{value:"CU",children:"CU - Close Up"}),(0,r.jsx)("option",{value:"MCU",children:"MCU - Medium Close Up"}),(0,r.jsx)("option",{value:"MS",children:"MS - Medium Shot"}),(0,r.jsx)("option",{value:"MLS",children:"MLS - Medium Long Shot"}),(0,r.jsx)("option",{value:"LS",children:"LS - Long Shot"}),(0,r.jsx)("option",{value:"WS",children:"WS - Wide Shot"}),(0,r.jsx)("option",{value:"EWS",children:"EWS - Extreme Wide Shot"}),(0,r.jsx)("option",{value:"OTS",children:"OTS - Over the Shoulder"}),(0,r.jsx)("option",{value:"POV",children:"POV - Point of View"}),(0,r.jsx)("option",{value:"2S",children:"2S - Two Shot"}),(0,r.jsx)("option",{value:"3S",children:"3S - Three Shot"}),(0,r.jsx)("option",{value:"INS",children:"INS - Insert"}),(0,r.jsx)("option",{value:"CUTAWAY",children:"Cutaway"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.angle,onChange:e=>i(n.id,"angle",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"Eye Level",children:"Eye Level"}),(0,r.jsx)("option",{value:"High Angle",children:"High Angle"}),(0,r.jsx)("option",{value:"Low Angle",children:"Low Angle"}),(0,r.jsx)("option",{value:"Dutch/Canted",children:"Dutch/Canted"}),(0,r.jsx)("option",{value:"Bird's Eye",children:"Bird's Eye View"}),(0,r.jsx)("option",{value:"Worm's Eye",children:"Worm's Eye View"}),(0,r.jsx)("option",{value:"Over Head",children:"Over Head"}),(0,r.jsx)("option",{value:"Hip Level",children:"Hip Level"}),(0,r.jsx)("option",{value:"Knee Level",children:"Knee Level"}),(0,r.jsx)("option",{value:"Ground Level",children:"Ground Level"}),(0,r.jsx)("option",{value:"Shoulder Level",children:"Shoulder Level"}),(0,r.jsx)("option",{value:"Top 45",children:"Top 45\xb0"}),(0,r.jsx)("option",{value:"Profile",children:"Profile (90\xb0)"}),(0,r.jsx)("option",{value:"3/4 Front",children:"3/4 Front"}),(0,r.jsx)("option",{value:"3/4 Back",children:"3/4 Back"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.movement,onChange:e=>i(n.id,"movement",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"Still",children:"Still"}),(0,r.jsx)("option",{value:"Pan Left",children:"Pan Left"}),(0,r.jsx)("option",{value:"Pan Right",children:"Pan Right"}),(0,r.jsx)("option",{value:"Tilt Up",children:"Tilt Up"}),(0,r.jsx)("option",{value:"Tilt Down",children:"Tilt Down"}),(0,r.jsx)("option",{value:"Dolly In",children:"Dolly In"}),(0,r.jsx)("option",{value:"Dolly Out",children:"Dolly Out"}),(0,r.jsx)("option",{value:"Dolly Left",children:"Dolly Left"}),(0,r.jsx)("option",{value:"Dolly Right",children:"Dolly Right"}),(0,r.jsx)("option",{value:"Truck Left",children:"Truck Left"}),(0,r.jsx)("option",{value:"Truck Right",children:"Truck Right"}),(0,r.jsx)("option",{value:"Zoom In",children:"Zoom In"}),(0,r.jsx)("option",{value:"Zoom Out",children:"Zoom Out"}),(0,r.jsx)("option",{value:"Handheld",children:"Handheld"}),(0,r.jsx)("option",{value:"Handheld (Ronin)",children:"Handheld (Ronin)"}),(0,r.jsx)("option",{value:"Steadicam",children:"Steadicam"}),(0,r.jsx)("option",{value:"Crane Up",children:"Crane Up"}),(0,r.jsx)("option",{value:"Crane Down",children:"Crane Down"}),(0,r.jsx)("option",{value:"Jib",children:"Jib"}),(0,r.jsx)("option",{value:"Track",children:"Track"}),(0,r.jsx)("option",{value:"Arc Left",children:"Arc Left"}),(0,r.jsx)("option",{value:"Arc Right",children:"Arc Right"}),(0,r.jsx)("option",{value:"360\xb0",children:"360\xb0 Rotation"}),(0,r.jsx)("option",{value:"Whip Pan",children:"Whip Pan"}),(0,r.jsx)("option",{value:"Push In",children:"Push In"}),(0,r.jsx)("option",{value:"Pull Out",children:"Pull Out"}),(0,r.jsx)("option",{value:"Follow",children:"Follow"}),(0,r.jsx)("option",{value:"Lead",children:"Lead"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("input",{type:"number",value:n.lens?n.lens.replace("mm","").trim():"",onChange:e=>i(n.id,"lens",e.target.value),className:"text-gray-600 w-16 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"50"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"mm"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("textarea",{value:n.description,onChange:e=>i(n.id,"description",e.target.value),className:"text-gray-600 w-52 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",placeholder:"Scene description",rows:"2"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.cast,onChange:e=>i(n.id,"cast",e.target.value),className:"text-gray-600 w-28 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"Cast"})}),(0,r.jsx)("td",{className:"px-4 py-3",onPaste:e=>o(e,n.id),children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[s[n.id]?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:s[n.id],alt:"Ref for ".concat(n.shotNumber),className:"w-20 h-16 object-cover rounded-lg border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(s[n.id],"_blank")}),(0,r.jsx)("button",{onClick:()=>c(n.id),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(O.A,{className:"w-3 h-3"})})]}):(0,r.jsx)("div",{className:"w-20 h-16 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:(0,r.jsx)(R.A,{className:"w-6 h-6 text-gray-400"})}),(0,r.jsx)("input",{type:"file",accept:"image/*",id:"image-".concat(n.id),onChange:e=>l(n.id,e.target.files[0]),className:"hidden"}),(0,r.jsx)("label",{htmlFor:"image-".concat(n.id),className:"text-xs font-medium text-indigo-600 hover:text-indigo-700 cursor-pointer transition-colors",children:s[n.id]?"Change":"Upload"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.props,onChange:e=>i(n.id,"props",e.target.value),className:"text-gray-600 w-36 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"Props"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.costume,onChange:e=>i(n.id,"costume",e.target.value),className:"text-gray-600 w-36 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"Costume"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("textarea",{value:n.notes,onChange:e=>i(n.id,"notes",e.target.value),className:"text-gray-600 w-36 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",placeholder:"Notes",rows:"2"})})]}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:(0,r.jsx)("button",{onClick:()=>d(n.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:(0,r.jsx)(x.A,{className:"w-4 h-4"})})})]})}function ea(e){let{project:t,onBack:n,onSave:s}=e,[l,o]=(0,a.useState)(()=>{var e;let n={projectTitle:(null==t?void 0:t.name)||"",episodeNumber:"",shootingDay:"",totalDays:"",date:new Date().toISOString().split("T")[0],callTime:"",sunrise:"06:30",sunset:"18:30",weather:"",location1:"",location2:"",director:"",producer:"",dop:"",firstAD:"",secondAD:"",pd:"",artTime:"",lunchTime:"",dinnerTime:"",precipProb:"",temp:"",realFeel:"",firstmealTime:"",secondmealTime:"",wrapTime:""};return(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.headerInfo)?{...n,...t.data.headerInfo}:n}),[d,x]=(0,a.useState)(()=>{var e;return(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.timelineItems)||[]}),[g,m]=(0,a.useState)(()=>{var e;return(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.imagePreviews)||{}}),[p,f]=(0,a.useState)("idle"),[v,y]=(0,a.useState)(!1),[j,w]=(0,a.useState)(1),S=(0,a.useRef)(null),k=(0,a.useRef)(!0),C=(0,a.useRef)(null),A=(0,a.useRef)(null),T=(0,a.useRef)(null),[L,E]=(0,a.useState)(!1),I=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(k.current){k.current=!1;return}return f("dirty"),S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{f("saving"),await new Promise(e=>setTimeout(e,500)),s({headerInfo:l,timelineItems:d,imagePreviews:g}),f("saved"),await new Promise(e=>setTimeout(e,1500)),f("idle")},1200),()=>{S.current&&clearTimeout(S.current)}},[l,d,g,s]),(0,a.useEffect)(()=>{let e=C.current,t=A.current,n=null==e?void 0:e.querySelector("table");if(!e||!t||!n)return;let r=()=>{T.current&&(T.current.style.width="".concat(n.offsetWidth+100,"px")),E(e.scrollWidth>e.clientWidth&&e.getBoundingClientRect().bottom>window.innerHeight)},a=()=>{I.current||(I.current=!0,t.scrollLeft=e.scrollLeft,requestAnimationFrame(()=>{I.current=!1}))},s=()=>{I.current||(I.current=!0,e.scrollLeft=t.scrollLeft,requestAnimationFrame(()=>{I.current=!1}))},i=new ResizeObserver(r);return i.observe(n),e.addEventListener("scroll",a),t.addEventListener("scroll",s),window.addEventListener("resize",r),window.addEventListener("scroll",r,!0),r(),()=>{i.disconnect(),e.removeEventListener("scroll",a),t.removeEventListener("scroll",s),window.removeEventListener("resize",r),window.removeEventListener("scroll",r,!0)}},[d,j]);let z=(0,a.useCallback)(e=>{let t=l.callTime||"06:00";x(e.map(e=>{let n=t,r=$(n,e.duration);return t=r||t,{...e,start:n,end:r}}))},[l.callTime]),M=(0,a.useCallback)((e,t,n)=>{let r=d.findIndex(t=>t.id===e);if(-1===r)return;if("start"===t&&0===r){o(e=>({...e,callTime:n}));return}let a=[...d],s={...a[r]},i=!1;if("end"===t?(s.end=n<s.start?s.start:n,s.duration=ee(s.start,s.end),i=!0):"duration"===t?(s.duration=parseInt(n,10)>=0?parseInt(n,10):0,s.end=$(s.start,s.duration),i=!0):"start"!==t&&(s[t]=n),a[r]=s,i){let e=a[r].end;for(let t=r+1;t<a.length;t++)a[t].start=e,a[t].end=$(e,a[t].duration),e=a[t].end}x(a)},[d]),O=(0,a.useCallback)(()=>{let e=d[d.length-1],t=e?e.end:l.callTime||"06:00",n={id:b(),type:"shot",start:t,duration:10,end:"",sceneNumber:"",shotNumber:"",intExt:"INT",dayNight:"DAY",location:"",description:"",cast:"",shotSize:"MS",angle:"Eye Level",movement:"Still",lens:"",props:"",costume:"",notes:"",imageUrl:""};n.end=$(n.start,n.duration),x(e=>[...e,n])},[d,l.callTime]),R=(0,a.useCallback)(()=>{let e=d[d.length-1],t=e?e.end:l.callTime||"06:00",n={id:b(),type:"break",start:t,duration:30,end:"",description:"Meal Break"};n.end=$(n.start,n.duration),x(e=>[...e,n])},[d,l.callTime]),ea=(0,a.useCallback)(e=>{if(g[e]){let t={...g};delete t[e],m(t)}z(d.filter(t=>t.id!==e))},[d,z,g]),es=(0,a.useCallback)((e,t)=>{if(!t||!t.type.startsWith("image/"))return;let n=new FileReader;n.onloadend=()=>m(t=>({...t,[e]:n.result})),n.readAsDataURL(t)},[]),ei=(0,a.useCallback)(e=>{m(t=>{let n={...t};return delete n[e],n})},[]),el=(0,a.useCallback)((e,t)=>{var n;let r=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(r){for(let n of r)if(n.type.startsWith("image/")){let r=n.getAsFile();if(r){e.preventDefault(),es(t,r);return}}}},[es]),eo=(0,a.useMemo)(()=>{let e=d.reduce((e,t)=>e+(t.duration||0),0),t=d.filter(e=>"shot"===e.type).length,n=d.filter(e=>"break"===e.type).reduce((e,t)=>e+(t.duration||0),0);return{totalHours:Math.floor(e/60),totalMinutes:e%60,shotCount:t,breakHours:Math.floor(n/60),breakMinutes:n%60}},[d]),ed=(0,D.FR)((0,D.MS)(D.AN),(0,D.MS)(D.uN,{coordinateGetter:P.JR}));(0,a.useEffect)(()=>{z(d)},[l.callTime,z]);let ec=[e=>{let{transform:t}=e;return{...t,x:t.x/j,y:t.y/j}}];return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 relative overflow-x-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='110' height='73.33' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cstyle%3E.pattern %7B width: 100%25; height: 100%25; --s: 110px; --c1: %23dedede; --c2: %23ededed; --c3: %23d6d6d6; --_g: var(--c1) 10%25,var(--c2) 10.5%25 19%25,%230000 19.5%25 80.5%25,var(--c2) 81%25 89.5%25,var(--c3) 90%25; --_c: from -90deg at 37.5%25 50%25,%230000 75%25; --_l1: linear-gradient(145deg,var(--_g)); --_l2: linear-gradient( 35deg,var(--_g)); background: var(--_l1), var(--_l1) calc(var(--s)/2) var(--s), var(--_l2), var(--_l2) calc(var(--s)/2) var(--s), conic-gradient(var(--_c),var(--c1) 0) calc(var(--s)/8) 0, conic-gradient(var(--_c),var(--c3) 0) calc(var(--s)/2) 0, linear-gradient(90deg,var(--c3) 38%25,var(--c1) 0 50%25,var(--c3) 0 62%25,var(--c1) 0); background-size: var(--s) calc(2*var(--s)/3); %7D%3C/style%3E%3C/defs%3E%3CforeignObject width='100%25' height='100%25'%3E%3Cdiv class='pattern' xmlns='http://www.w3.org/1999/xhtml'%3E%3C/div%3E%3C/foreignObject%3E%3C/svg%3E\")"}}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col flex-grow",children:[(0,r.jsx)("header",{className:"w-screen bg-white shadow-sm border-b border-gray-100 fixed top-0 z-40",children:(0,r.jsx)("div",{className:"px-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(U.A,{className:"w-5 h-5 text-gray-700"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:l.projectTitle||"Untitled Project"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Shooting Schedule Editor"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(en,{status:p}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-200"}),(0,r.jsxs)("button",{onClick:()=>N({...t,data:{headerInfo:l,timelineItems:d,imagePreviews:g}}),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Save .mbd"})]}),(0,r.jsxs)("button",{onClick:()=>et(l,d,eo,g),className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:[(0,r.jsx)(W.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Export PDF"})]})]})]})})}),(0,r.jsxs)("main",{className:"flex-1 p-8 pt-24",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("button",{onClick:()=>y(!v),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-all",children:[(0,r.jsx)(_.A,{className:"w-4 h-4 text-gray-700"}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:"Production Details"}),(0,r.jsx)(H.A,{className:"w-4 h-4 text-gray-500 transition-transform ".concat(v?"rotate-180":"")})]}),v&&(0,r.jsx)("div",{className:"mt-4 bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-in slide-in-from-top-2 duration-300",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 text-gray-600"}),"Project Information"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Title"}),(0,r.jsx)("input",{type:"text",value:l.projectTitle,onChange:e=>o({...l,projectTitle:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Episode #"}),(0,r.jsx)("input",{type:"text",value:l.episodeNumber,placeholder:"Ep. No.",onChange:e=>o({...l,episodeNumber:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day/Total"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"text",value:l.shootingDay,onChange:e=>o({...l,shootingDay:e.target.value}),className:"text-gray-500 w-14 px-2 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-center transition-all",placeholder:"1"}),(0,r.jsx)("span",{className:"text-gray-500",children:"/"}),(0,r.jsx)("input",{type:"text",value:l.totalDays,onChange:e=>o({...l,totalDays:e.target.value}),className:"text-gray-500 w-14 px-2 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-center transition-all",placeholder:"3"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shooting Date"}),(0,r.jsx)("input",{type:"date",value:l.date,onChange:e=>o({...l,date:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(B.A,{className:"w-4 h-4 text-gray-600"}),"Time & Location"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Call Time"}),(0,r.jsx)("input",{type:"time",value:l.callTime,onChange:e=>o({...l,callTime:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wrap Time"}),(0,r.jsx)("input",{type:"time",value:l.wrapTime,onChange:e=>o({...l,wrapTime:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(J.A,{className:"w-3 h-3 inline mr-1"}),"Sunrise"]}),(0,r.jsx)("input",{type:"time",value:l.sunrise,onChange:e=>o({...l,sunrise:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(G.A,{className:"w-3 h-3 inline mr-1"}),"Sunset"]}),(0,r.jsx)("input",{type:"time",value:l.sunset,onChange:e=>o({...l,sunset:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location 1"}),(0,r.jsx)("input",{type:"text",value:l.location1,onChange:e=>o({...l,location1:e.target.value}),placeholder:"Main location",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location 2"}),(0,r.jsx)("input",{type:"text",value:l.location2,onChange:e=>o({...l,location2:e.target.value}),placeholder:"Secondary location (optional)",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(V.A,{className:"w-4 h-4 text-gray-600"}),"Weather & Meals"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weather Forecast"}),(0,r.jsx)("input",{type:"text",value:l.weather,onChange:e=>o({...l,weather:e.target.value}),placeholder:"Considerable cloudiness",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(Y.A,{className:"w-3 h-3 inline mr-1"}),"Temp"]}),(0,r.jsx)("input",{type:"text",value:l.temp,onChange:e=>o({...l,temp:e.target.value}),placeholder:"34\xb0",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Real Feel"}),(0,r.jsx)("input",{type:"text",value:l.realFeel,onChange:e=>o({...l,realFeel:e.target.value}),placeholder:"37\xb0",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(K.A,{className:"w-3 h-3 inline mr-1"}),"Precipitation %"]}),(0,r.jsx)("input",{type:"text",value:l.precipProb,onChange:e=>o({...l,precipProb:e.target.value}),placeholder:"73%",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(Z.A,{className:"w-3 h-3 inline mr-1"}),"First Meal"]}),(0,r.jsx)("input",{type:"time",value:l.firstmealTime,onChange:e=>o({...l,firstmealTime:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,r.jsx)(X.A,{className:"w-3 h-3 inline mr-1"}),"Second Meal"]}),(0,r.jsx)("input",{type:"time",value:l.secondmealTime,onChange:e=>o({...l,secondmealTime:e.target.value}),className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(q.A,{className:"w-4 h-4 text-gray-600"}),"Key Crew"]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Producer"}),(0,r.jsx)("input",{type:"text",value:l.producer,onChange:e=>o({...l,producer:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Director"}),(0,r.jsx)("input",{type:"text",value:l.director,onChange:e=>o({...l,director:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Production Designer"}),(0,r.jsx)("input",{type:"text",value:l.pd,onChange:e=>o({...l,pd:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Director of Photography"}),(0,r.jsx)("input",{type:"text",value:l.dop,onChange:e=>o({...l,dop:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1st AD"}),(0,r.jsx)("input",{type:"text",value:l.firstAD,onChange:e=>o({...l,firstAD:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2nd AD"}),(0,r.jsx)("input",{type:"text",value:l.secondAD,onChange:e=>o({...l,secondAD:e.target.value}),placeholder:"Name & Phone",className:"text-gray-500 w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Duration"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[eo.totalHours,"h ",eo.totalMinutes,"m"]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(h.A,{className:"w-6 h-6 text-indigo-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shots"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:eo.shotCount})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(u.A,{className:"w-6 h-6 text-purple-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Break Time"}),(0,r.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[eo.breakHours,"h ",eo.breakMinutes,"m"]})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(Z.A,{className:"w-6 h-6 text-amber-600"})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Est. Wrap"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.length>0?d[d.length-1].end:"--:--"})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(F.A,{className:"w-6 h-6 text-green-600"})})]})})]}),(0,r.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,r.jsxs)("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"Add Shot"]}),(0,r.jsxs)("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 text-white font-medium rounded-lg hover:bg-amber-600 transition-colors",children:[(0,r.jsx)(Z.A,{className:"w-4 h-4"}),"Add Break"]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,r.jsxs)("div",{ref:C,className:"overflow-x-auto",style:{zoom:j},children:[(0,r.jsx)(D.Mp,{sensors:ed,collisionDetection:D.fp,onDragEnd:function(e){let{active:t,over:n}=e;if(t&&n&&t.id!==n.id){let e=d.findIndex(e=>e.id===t.id),r=d.findIndex(e=>e.id===n.id);z((0,P.be)(d,e,r))}},modifiers:ec,children:(0,r.jsxs)("table",{className:"w-full",style:{minWidth:"2400px"},children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0 z-20",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Time"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Dur."}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Scene"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Shot"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"INT/EXT"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Period"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Location"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Size"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Angle"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Movement"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Lens"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Cast"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Reference"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Props"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Costume"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Notes"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase tracking-wider"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:(0,r.jsx)(P.gB,{items:d.map(e=>e.id),strategy:P._G,children:d.map((e,t)=>(0,r.jsx)(er,{id:e.id,item:e,index:t,imagePreviews:g,handleItemChange:M,handleImageUpload:es,handlePasteImage:el,removeTimelineItem:ea,handleRemoveImage:ei},e.id))})})]})}),0===d.length&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No shots added yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:'Click "Add Shot" to start building your schedule'})]})]})})]}),(0,r.jsx)("div",{ref:A,className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 overflow-x-auto transition-opacity duration-200",style:{opacity:+!!L,pointerEvents:L?"auto":"none",height:"20px"},children:(0,r.jsx)("div",{ref:T,style:{height:"1px"}})}),(0,r.jsxs)("div",{className:"fixed bottom-10 right-6 z-50 flex flex-col items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>w(e=>Math.min(e+.05,1.5)),className:"w-10 h-10 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full flex items-center justify-center shadow-lg hover:bg-gray-50 hover:border-gray-300 transition-all",title:"Zoom In",children:(0,r.jsx)(i.A,{className:"w-5 h-5 text-gray-700"})}),(0,r.jsxs)("span",{className:"text-xs font-bold text-gray-600 bg-white/80 backdrop-blur-sm py-1 px-2 rounded-full border border-gray-200",children:[Math.round(100*j),"%"]}),(0,r.jsx)("button",{onClick:()=>w(e=>Math.max(e-.05,.75)),className:"w-10 h-10 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-full flex items-center justify-center shadow-lg hover:bg-gray-50 hover:border-gray-300 transition-all",title:"Zoom Out",children:(0,r.jsx)(Q.A,{className:"w-5 h-5 text-gray-700"})})]})]})]})}var es=n(4355);function ei(e){let{status:t}=e,{icon:n,text:a,className:s}=(()=>{switch(t){case"saving":return{icon:(0,r.jsx)(E.A,{className:"w-4 h-4 animate-spin"}),text:"Saving...",className:"text-gray-600"};case"dirty":return{icon:(0,r.jsx)(I.A,{className:"w-4 h-4"}),text:"Unsaved changes",className:"text-amber-600"};case"saved":return{icon:(0,r.jsx)(F.A,{className:"w-4 h-4"}),text:"Saved",className:"text-green-600"};default:return{icon:(0,r.jsx)(z.A,{className:"w-4 h-4"}),text:"All changes saved",className:"text-gray-500"}}})();return(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm font-medium ".concat(s," transition-all duration-300"),children:[n,(0,r.jsx)("span",{className:"hidden sm:inline",children:a})]})}function el(e){let{id:t,item:n,index:a,imagePreviews:s,handleItemChange:i,handleImageUpload:l,handlePasteImage:o,removeShotItem:d,handleRemoveImage:c}=e,{attributes:u,listeners:g,setNodeRef:m,transform:h,transition:p}=(0,P.gl)({id:t}),f={transform:L.Ks.Transform.toString(h),transition:p};return(0,r.jsxs)("tr",{ref:m,style:f,className:"group ".concat(a%2==0?"bg-white":"bg-gray-50/50"),children:[(0,r.jsx)("td",{className:"px-2 py-3 whitespace-nowrap text-center",children:(0,r.jsx)("button",{...u,...g,className:"cursor-grab p-1 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(M.A,{size:16})})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.sceneNumber,onChange:e=>i(n.id,"sceneNumber",e.target.value),className:"text-gray-600 w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all",placeholder:"1A"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("input",{type:"text",value:n.shotNumber,onChange:e=>i(n.id,"shotNumber",e.target.value),className:"text-gray-600 w-20 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 font-medium transition-all",placeholder:"001"})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.shotSize,onChange:e=>i(n.id,"shotSize",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"ECU",children:"ECU - Extreme Close Up"}),(0,r.jsx)("option",{value:"CU",children:"CU - Close Up"}),(0,r.jsx)("option",{value:"MCU",children:"MCU - Medium Close Up"}),(0,r.jsx)("option",{value:"MS",children:"MS - Medium Shot"}),(0,r.jsx)("option",{value:"MLS",children:"MLS - Medium Long Shot"}),(0,r.jsx)("option",{value:"LS",children:"LS - Long Shot"}),(0,r.jsx)("option",{value:"WS",children:"WS - Wide Shot"}),(0,r.jsx)("option",{value:"EWS",children:"EWS - Extreme Wide Shot"}),(0,r.jsx)("option",{value:"OTS",children:"OTS - Over the Shoulder"}),(0,r.jsx)("option",{value:"POV",children:"POV - Point of View"}),(0,r.jsx)("option",{value:"2S",children:"2S - Two Shot"}),(0,r.jsx)("option",{value:"3S",children:"3S - Three Shot"}),(0,r.jsx)("option",{value:"INS",children:"INS - Insert"}),(0,r.jsx)("option",{value:"CUTAWAY",children:"Cutaway"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.angle,onChange:e=>i(n.id,"angle",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"Eye Level",children:"Eye Level"}),(0,r.jsx)("option",{value:"High Angle",children:"High Angle"}),(0,r.jsx)("option",{value:"Low Angle",children:"Low Angle"}),(0,r.jsx)("option",{value:"Dutch/Canted",children:"Dutch/Canted"}),(0,r.jsx)("option",{value:"Bird's Eye",children:"Bird's Eye View"}),(0,r.jsx)("option",{value:"Worm's Eye",children:"Worm's Eye View"}),(0,r.jsx)("option",{value:"Over Head",children:"Over Head"}),(0,r.jsx)("option",{value:"Hip Level",children:"Hip Level"}),(0,r.jsx)("option",{value:"Knee Level",children:"Knee Level"}),(0,r.jsx)("option",{value:"Ground Level",children:"Ground Level"}),(0,r.jsx)("option",{value:"Shoulder Level",children:"Shoulder Level"}),(0,r.jsx)("option",{value:"Top 45",children:"Top 45\xb0"}),(0,r.jsx)("option",{value:"Profile",children:"Profile (90\xb0)"}),(0,r.jsx)("option",{value:"3/4 Front",children:"3/4 Front"}),(0,r.jsx)("option",{value:"3/4 Back",children:"3/4 Back"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("select",{value:n.movement,onChange:e=>i(n.id,"movement",e.target.value),className:"text-gray-600 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",children:[(0,r.jsx)("option",{value:"",children:"Select..."}),(0,r.jsx)("option",{value:"Still",children:"Still"}),(0,r.jsx)("option",{value:"Pan Left",children:"Pan Left"}),(0,r.jsx)("option",{value:"Pan Right",children:"Pan Right"}),(0,r.jsx)("option",{value:"Tilt Up",children:"Tilt Up"}),(0,r.jsx)("option",{value:"Tilt Down",children:"Tilt Down"}),(0,r.jsx)("option",{value:"Dolly In",children:"Dolly In"}),(0,r.jsx)("option",{value:"Dolly Out",children:"Dolly Out"}),(0,r.jsx)("option",{value:"Dolly Left",children:"Dolly Left"}),(0,r.jsx)("option",{value:"Dolly Right",children:"Dolly Right"}),(0,r.jsx)("option",{value:"Truck Left",children:"Truck Left"}),(0,r.jsx)("option",{value:"Truck Right",children:"Truck Right"}),(0,r.jsx)("option",{value:"Zoom In",children:"Zoom In"}),(0,r.jsx)("option",{value:"Zoom Out",children:"Zoom Out"}),(0,r.jsx)("option",{value:"Handheld",children:"Handheld"}),(0,r.jsx)("option",{value:"Handheld (Ronin)",children:"Handheld (Ronin)"}),(0,r.jsx)("option",{value:"Steadicam",children:"Steadicam"}),(0,r.jsx)("option",{value:"Crane Up",children:"Crane Up"}),(0,r.jsx)("option",{value:"Crane Down",children:"Crane Down"}),(0,r.jsx)("option",{value:"Jib",children:"Jib"}),(0,r.jsx)("option",{value:"Track",children:"Track"}),(0,r.jsx)("option",{value:"Arc Left",children:"Arc Left"}),(0,r.jsx)("option",{value:"Arc Right",children:"Arc Right"}),(0,r.jsx)("option",{value:"360\xb0",children:"360\xb0 Rotation"}),(0,r.jsx)("option",{value:"Whip Pan",children:"Whip Pan"}),(0,r.jsx)("option",{value:"Push In",children:"Push In"}),(0,r.jsx)("option",{value:"Pull Out",children:"Pull Out"}),(0,r.jsx)("option",{value:"Follow",children:"Follow"}),(0,r.jsx)("option",{value:"Lead",children:"Lead"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("input",{type:"number",value:n.lens?n.lens.replace("mm","").trim():"",onChange:e=>i(n.id,"lens",e.target.value),className:"text-gray-600 w-16 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",placeholder:"50"}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"mm"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("textarea",{value:n.description,onChange:e=>i(n.id,"description",e.target.value),className:"text-gray-600 w-64 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",placeholder:"Shot description",rows:"2"})}),(0,r.jsx)("td",{className:"px-4 py-3",onPaste:e=>o(e,n.id),children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[s[n.id]?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:s[n.id],alt:"Ref for ".concat(n.shotNumber),className:"w-24 h-20 object-cover rounded-lg border border-gray-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(s[n.id],"_blank")}),(0,r.jsx)("button",{onClick:()=>c(n.id),className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(O.A,{className:"w-3 h-3"})})]}):(0,r.jsx)("div",{className:"w-24 h-20 bg-gray-100 rounded-lg border border-gray-200 flex items-center justify-center",children:(0,r.jsx)(R.A,{className:"w-6 h-6 text-gray-400"})}),(0,r.jsx)("input",{type:"file",accept:"image/*",id:"image-".concat(n.id),onChange:e=>l(n.id,e.target.files[0]),className:"hidden"}),(0,r.jsx)("label",{htmlFor:"image-".concat(n.id),className:"text-xs font-medium text-indigo-600 hover:text-indigo-700 cursor-pointer transition-colors",children:s[n.id]?"Change":"Upload"})]})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("textarea",{value:n.notes,onChange:e=>i(n.id,"notes",e.target.value),className:"text-gray-600 w-52 px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:border-gray-400 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 resize-none transition-all",placeholder:"Notes",rows:"2"})}),(0,r.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:(0,r.jsx)("button",{onClick:()=>d(n.id),className:"p-1.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:(0,r.jsx)(x.A,{className:"w-4 h-4"})})})]})}function eo(e){let{project:t,onBack:n,onSave:s}=e,[l,o]=(0,a.useState)(()=>(null==t?void 0:t.name)||"Untitled Project"),[d,c]=(0,a.useState)(()=>{var e,n;return(null==t?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.shotListData)||void 0===e?void 0:e.shotListItems)||[]}),[x,u]=(0,a.useState)(()=>{var e,n;return(null==t?void 0:null===(n=t.data)||void 0===n?void 0:null===(e=n.shotListData)||void 0===e?void 0:e.imagePreviews)||{}}),[g,m]=(0,a.useState)("idle"),h=(0,a.useRef)(null),p=(0,a.useRef)(!0);(0,a.useEffect)(()=>{if(p.current){p.current=!1;return}return m("dirty"),h.current&&clearTimeout(h.current),h.current=setTimeout(async()=>{m("saving"),await new Promise(e=>setTimeout(e,500)),s({shotListData:{shotListItems:d,imagePreviews:x}}),m("saved"),await new Promise(e=>setTimeout(e,1500)),m("idle")},1200),()=>{h.current&&clearTimeout(h.current)}},[d,x,s]);let v=(0,a.useCallback)((e,t,n)=>{c(r=>r.map(r=>r.id===e?{...r,[t]:n}:r))},[]),y=(0,a.useCallback)(()=>{let e={id:b(),sceneNumber:"",shotNumber:"",shotSize:"MS",angle:"Eye Level",movement:"Still",lens:"",description:"",notes:"",imageUrl:""};c(t=>[...t,e])},[]),j=(0,a.useCallback)(e=>{if(c(t=>t.filter(t=>t.id!==e)),x[e]){let t={...x};delete t[e],u(t)}},[x]),w=(0,a.useCallback)((e,t)=>{if(!t||!t.type.startsWith("image/"))return;let n=new FileReader;n.onloadend=()=>u(t=>({...t,[e]:n.result})),n.readAsDataURL(t)},[]),S=(0,a.useCallback)(e=>{u(t=>{let n={...t};return delete n[e],n})},[]),C=(0,a.useCallback)((e,t)=>{var n;let r=null===(n=e.clipboardData)||void 0===n?void 0:n.items;if(r){for(let n of r)if(n.type.startsWith("image/")){let r=n.getAsFile();if(r){e.preventDefault(),w(t,r);return}}}},[w]),A=(0,a.useMemo)(()=>({shotCount:d.length}),[d]),T=(0,D.FR)((0,D.MS)(D.AN),(0,D.MS)(D.uN,{coordinateGetter:P.JR}));return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 relative overflow-x-hidden flex flex-col",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='110' height='73.33' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cstyle%3E.pattern %7B width: 100%25; height: 100%25; --s: 110px; --c1: %23dedede; --c2: %23ededed; --c3: %23d6d6d6; --_g: var(--c1) 10%25,var(--c2) 10.5%25 19%25,%230000 19.5%25 80.5%25,var(--c2) 81%25 89.5%25,var(--c3) 90%25; --_c: from -90deg at 37.5%25 50%25,%230000 75%25; --_l1: linear-gradient(145deg,var(--_g)); --_l2: linear-gradient( 35deg,var(--_g)); background: var(--_l1), var(--_l1) calc(var(--s)/2) var(--s), var(--_l2), var(--_l2) calc(var(--s)/2) var(--s), conic-gradient(var(--_c),var(--c1) 0) calc(var(--s)/8) 0, conic-gradient(var(--_c),var(--c3) 0) calc(var(--s)/2) 0, linear-gradient(90deg,var(--c3) 38%25,var(--c1) 0 50%25,var(--c3) 0 62%25,var(--c1) 0); background-size: var(--s) calc(2*var(--s)/3); %7D%3C/style%3E%3C/defs%3E%3CforeignObject width='100%25' height='100%25'%3E%3Cdiv class='pattern' xmlns='http://www.w3.org/1999/xhtml'%3E%3C/div%3E%3C/foreignObject%3E%3C/svg%3E\")"}}),(0,r.jsxs)("div",{className:"relative z-10 flex flex-col flex-grow",children:[(0,r.jsx)("header",{className:"w-screen bg-white shadow-sm border-b border-gray-100 fixed top-0 z-40",children:(0,r.jsx)("div",{className:"px-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("button",{onClick:n,className:"p-2 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(U.A,{className:"w-5 h-5 text-gray-700"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:l}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Shot List Editor"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ei,{status:g}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-200"}),(0,r.jsxs)("button",{onClick:()=>N({...t,data:{...t.data,shotListData:{shotListItems:d,imagePreviews:x}}}),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 rounded-lg",children:[(0,r.jsx)(z.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Save .mbd"})]}),(0,r.jsxs)("button",{onClick:()=>{alert("Exporting Shot List to PDF is not yet implemented.")},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:[(0,r.jsx)(W.A,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Export PDF"})]})]})]})})}),(0,r.jsxs)("main",{className:"flex-1 p-8 pt-24",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total Shots"}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:A.shotCount})]}),(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)(es.A,{className:"w-6 h-6 text-purple-600"})})]})})}),(0,r.jsx)("div",{className:"flex gap-3 mb-6",children:(0,r.jsxs)("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,r.jsx)(i.A,{className:"w-4 h-4"}),"Add Shot"]})}),(0,r.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsx)(D.Mp,{sensors:T,collisionDetection:D.fp,onDragEnd:function(e){let{active:t,over:n}=e;t&&n&&t.id!==n.id&&c(e=>{let r=e.findIndex(e=>e.id===t.id),a=e.findIndex(e=>e.id===n.id);return(0,P.be)(e,r,a)})},children:(0,r.jsxs)("table",{className:"w-full",style:{minWidth:"1600px"},children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200 sticky top-0 z-20",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Scene"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Shot"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Size"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Angle"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Movement"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Lens"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Reference"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider",children:"Notes"}),(0,r.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase tracking-wider"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:(0,r.jsx)(P.gB,{items:d.map(e=>e.id),strategy:P._G,children:d.map((e,t)=>(0,r.jsx)(el,{id:e.id,item:e,index:t,imagePreviews:x,handleItemChange:v,handleImageUpload:w,handlePasteImage:C,removeShotItem:j,handleRemoveImage:S},e.id))})})]})}),0===d.length&&(0,r.jsxs)("div",{className:"text-center py-16",children:[(0,r.jsx)(f.A,{className:"mx-auto h-12 w-12 text-gray-300 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No shots added yet"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:'Click "Add Shot" to start building your shot list'})]})]})})]}),(0,r.jsx)(k,{})]})]})}let ed=function(){let[e,t]=(0,a.useState)("dashboard"),[n,s]=(0,a.useState)(null),i=(0,a.useCallback)((e,n)=>{s(e),"schedule"===n?t("scheduleEditor"):"shotlist"===n&&t("shotListEditor")},[]),l=(0,a.useCallback)(e=>{},[]),o=(0,a.useCallback)(e=>{if(!n)return;let t=JSON.parse(localStorage.getItem("shootingScheduleProjects")||"[]").map(t=>{if(t.id===n.id){var r,a;let n={...t.data,...e},s=(null===(a=e.scheduleData)||void 0===a?void 0:null===(r=a.headerInfo)||void 0===r?void 0:r.projectTitle)||t.name;return{...t,data:n,name:s,updatedAt:new Date().toISOString()}}return t}),r=t.find(e=>e.id===n.id);r&&s(r),localStorage.setItem("shootingScheduleProjects",JSON.stringify(t))},[n]),d=(0,a.useCallback)(()=>{t("dashboard"),s(null)},[]);return(0,a.useEffect)(()=>{let e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap",e.rel="stylesheet",document.head.appendChild(e),document.body.style.fontFamily="'Plus Jakarta Sans', 'IBM Plex Sans Thai', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif"},[]),(0,r.jsxs)(r.Fragment,{children:["dashboard"===e&&(0,r.jsx)(T,{onSelectProject:i,onCreateProject:l}),"scheduleEditor"===e&&n&&(0,r.jsx)(ea,{project:n,onBack:d,onSave:o}),"shotListEditor"===e&&n&&(0,r.jsx)(eo,{project:n,onBack:d,onSave:o})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[536,441,684,358],()=>t(750)),_N_E=e.O()}]);